<div class="row" style="height: 100%; flex-wrap: nowrap">
  <div class="col-auto" style="height: 100%">
    <div
      class="d-flex flex-column flex-shrink-0 p-3 text-white bg-dark"
      style="width: 100%; height: 100%"
    >
      <h4 class="my-2 mx-4">
        {{ documentationTitle }}
        <i
          data-bs-toggle="modal"
          data-bs-target="#saveDocModal"
          class="bi bi-download mx-2"
          style="cursor: pointer"
        ></i>
      </h4>

      <hr />
      <div class="d-flex mb-3 mb-md-0 text-white text-decoration-none">
        <button
          data-bs-toggle="modal"
          data-bs-target="#newSectionModal"
          class="btn btn-outline-light"
          aria-label="Download da prévia"
        >
          Nova Aba
        </button>
      </div>
      <hr />
      <ul class="nav nav-pills flex-column mb-auto">
        <li
          class="nav-item d-inline-flex p-2"
          style="cursor: pointer"
          *ngFor="let section of sections; let i = index"
        >
          <button
            (click)="selectSection(section, i)"
            style="width: 100%"
            class="nav-link active"
            *ngIf="sectionAtiva == i"
            aria-current="page"
          >
            {{ section.nome }}
          </button>
          <button
            (click)="selectSection(section, i)"
            style="width: 100%"
            class="nav-link text-white"
            *ngIf="sectionAtiva != i"
            aria-current="page"
          >
            {{ section.nome }}
          </button>

          <i
            class="bi bi-link mx-1 hoverIcon"
            (click)="copiarTexto('?to=' + section.nome)"
            data-bs-toggle="popover"
            data-bs-placement="top"
            [title]="'?to=' + section.nome + ' : Copiado!'"
          ></i>
          <i
            class="bi bi-trash-fill mx-1 text-danger hoverIcon"
            (click)="deleteSection(i)"
          ></i>
        </li>
      </ul>
      <hr />
    </div>
  </div>

  <div class="col mx-2" style="max-width: 80vw">
    <div class="my-4" *ngIf="tipoSectionAtiva == '1'">
      <div
        [(ngModel)]="conteudoEditor"
        style="max-height: 100%"
        [ngxSummernote]="configSummerNote"
        (summernoteModelChange)="setHtmlContent($event)"
      ></div>

      <div [ngxSummernoteView]="currentHtml"></div>
    </div>

    <div class="my-4" *ngIf="tipoSectionAtiva == '2'">
      <nav class="navbar rounded" style="background-color: #111111">
        <div class="container-fluid">
          <span class="navbar-brand mb-0 h1 text-light">Opçoes</span>
          <div class="navbar" id="navbarNavDropdown">
            <ul class="navbar-nav">
              <!-- <li class="nav-item">
                  <div class="input-group mt-3">
                    <input [(ngModel)]="sectionTableNameAtual" type="text" class="form-control" placeholder="Nome da Tabela" aria-label="Nome da Tabela" aria-describedby="button-addon2">
                    <button (click)="addTabela()" class="btn btn-outline-secondary" type="button" id="button-addon2">Add Tabela</button>
                  </div>
                </li> -->
              <li class="nav-item">
                <div
                  class="btn-group"
                  role="group"
                  aria-label="Basic outlined example"
                >
                  <button
                    data-bs-toggle="modal"
                    data-bs-target="#NovaTabelaModal"
                    type="button"
                    class="btn btn-outline-light"
                  >
                    Nova Tabela
                  </button>
                  <button
                    data-bs-toggle="modal"
                    data-bs-target="#NovaProcedureModal"
                    type="button"
                    class="btn btn-outline-light"
                  >
                    Nova Procedure
                  </button>
                  <button type="button" class="btn btn-outline-light">
                    Novo Objeto Vazio
                  </button>
                </div>
              </li>
            </ul>
          </div>
        </div>
      </nav>

      <div class="container-fluid mt-3">
        <div class="accordion" id="accordionExample">
          <div class="accordion-item">
            <h2 class="accordion-header" id="headingOne">
              <button
                class="accordion-button"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#collapseOne"
                aria-expanded="true"
                aria-controls="collapseOne"
              >
                Tabelas
              </button>
            </h2>
            <div
              id="collapseOne"
              class="accordion-collapse collapse"
              aria-labelledby="headingOne"
              data-bs-parent="#accordionExample"
            >
              <div class="accordion-body">
                <app-edit-table
                  (onEditTable)="editTabelas($event)"
                  (onDeleteTable)="deleteTable($event)"
                  *ngFor="let slt of sectionTables; let i = index"
                  [index]="i"
                  [descricaoTabela]="slt.descricaoTabela"
                  [titulo]="slt.titulo"
                  [dh_alteracao]="slt.dh_alteracao"
                  [colunas]="slt.colunas"
                ></app-edit-table>
              </div>
            </div>
          </div>
          <div class="accordion-item">
            <h2 class="accordion-header" id="headingTwo">
              <button
                class="accordion-button collapsed"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#collapseTwo"
                aria-expanded="false"
                aria-controls="collapseTwo"
              >
                Procedures
              </button>
            </h2>
            <div
              id="collapseTwo"
              class="accordion-collapse collapse"
              aria-labelledby="headingTwo"
              data-bs-parent="#accordionExample"
            >
              <div class="accordion-body">
                <app-edit-procedure
                  (onDeleteProcedure)="deleteProcedures($event)"
                  (onEditProcedure)="editProcedures($event)"
                  *ngFor="let slt of sectionProcedures; let i = index"
                  [index]="i"
                  [descricaoProcedure]="slt.descricaoProcedure"
                  [titulo]="slt.titulo"
                  [dh_alteracao]="slt.dh_alteracao"
                  [params]="slt.params"
                ></app-edit-procedure>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Save Documentatios Modal -->
<div
  class="modal fade"
  id="saveDocModal"
  tabindex="-1"
  aria-labelledby="saveDocModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="saveDocModalLabel">
          {{ documentationTitle }}, Version: V.{{ documentationVersion }}
        </h1>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        <div class="mb-3">
          <label for="tituloNewSection" class="form-label"
            >Salvar Nova Versão da Documentação</label
          >

          <div class="input-group my-3">
            <span class="input-group-text">Commit</span>
            <textarea
              [(ngModel)]="documentationCommitText"
              class="form-control"
              aria-label="With textarea"
            ></textarea>
          </div>

          <span class="my-3"
            >Nova Versão : V.{{ documentationVersion + 1 }}</span
          >

          <div class="mt-4">Sessões Carregadas:</div>
          <ul class="list-group mx-3">
            <ng-container *ngFor="let section of sections">
              <li *ngIf="section.changes == 1" class="list-group-item">
                {{ section.nome }}
              </li>
            </ng-container>
          </ul>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          Close
        </button>
        <button
          type="submit"
          (click)="exportar()"
          data-bs-dismiss="modal"
          class="btn btn-primary"
        >
          Salvar
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Modal Nova Procedure -->
<div
  class="modal fade"
  id="NovaProcedureModal"
  data-bs-backdrop="static"
  data-bs-keyboard="false"
  tabindex="-1"
  aria-labelledby="NovaProcedureModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="NovaProcedureModalLabel">
          Adicionar Uma Nova Procedure
        </h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        <input
          [(ngModel)]="sectionTableNameAtual"
          type="text"
          class="form-control"
          placeholder="Nome da Procedure*"
          aria-label="Nome da Procedure"
          aria-describedby="button-addon2"
        />
        <textarea
          [(ngModel)]="sectionTableDescAtual"
          type="text"
          class="form-control mt-2"
          placeholder="Descrição"
          aria-label="Descrição"
          aria-describedby="button-addon2"
        ></textarea>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          Cancelar
        </button>
        <button
          type="button"
          (click)="addProcedure()"
          data-bs-dismiss="modal"
          class="btn btn-primary"
        >
          Salvar
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Modal Nova Tabela -->
<div
  class="modal fade"
  id="NovaTabelaModal"
  data-bs-backdrop="static"
  data-bs-keyboard="false"
  tabindex="-1"
  aria-labelledby="NovaTabelaModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="NovaTabelaModalLabel">
          Adicionar Uma Nova Tabela
        </h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        <input
          [(ngModel)]="sectionTableNameAtual"
          type="text"
          class="form-control"
          placeholder="Nome da Tabela*"
          aria-label="Nome da Tabela"
          aria-describedby="button-addon2"
        />
        <textarea
          [(ngModel)]="sectionTableDescAtual"
          type="text"
          class="form-control mt-2"
          placeholder="Descrição"
          aria-label="Descrição"
          aria-describedby="button-addon2"
        ></textarea>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          Cancelar
        </button>
        <button
          type="button"
          (click)="addTabela()"
          data-bs-dismiss="modal"
          class="btn btn-primary"
        >
          Salvar
        </button>
      </div>
    </div>
  </div>
</div>

<!-- New Section Modal -->
<div
  class="modal fade"
  id="newSectionModal"
  tabindex="-1"
  aria-labelledby="newSectionModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="newSectionModalLabel">New Section</h1>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        <div class="mb-3">
          <label for="tituloNewSection" class="form-label"
            >Titulo da Section</label
          >
          <input
            required
            [(ngModel)]="nomeNovaSection"
            type="text"
            class="form-control my-2"
            id="tituloNewSection"
            placeholder="Titulo"
          />

          <label for="selectNewSection" class="form-label"
            >Tipo da Section</label
          >
          <select
            required
            [(ngModel)]="tipoNovaSection"
            class="form-select my-2"
            id="selectNewSection"
            aria-label="Selecione um tipo"
          >
            <option selected value="1">Documentação Padrão</option>
            <option value="2">Dicionario de Dados</option>
          </select>

          <div *ngIf="tipoNovaSection == '2'">
            <!-- <div class="input-group flex-nowrap my-2">
                        <span class="input-group-text" id="addon-wrapping">🙋</span>
                        <input type="text" class="form-control" placeholder="Username" aria-label="Username" aria-describedby="addon-wrapping">
                        
                        <span class="input-group-text" id="addon-wrapping">🔑</span>
                        <input type="text" class="form-control" placeholder="Password" aria-label="Password" aria-describedby="addon-wrapping">
                       
                        
                    </div>
                    <div class="input-group flex-nowrap my-2">
                        
                        <span class="input-group-text" id="addon-wrapping">🏠</span>
                        <input type="text" class="form-control" placeholder="Host" aria-label="Host" aria-describedby="addon-wrapping">

                        <span class="input-group-text" id="addon-wrapping">🚪</span>
                        <input type="text" class="form-control" placeholder="Port" aria-label="Port" aria-describedby="addon-wrapping">
                    </div>
                    <div class="input-group flex-nowrap my-2">

                        <label class="input-group-text" for="sgbdSelection">Sgbd</label>
                        <select class="form-select" id="sgbdSelection">
                          <option selected>Choose...</option>
                          <option value="1">Sql Server</option>
                          <option value="2">Postgres</option>
                        </select>
                    </div> -->
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          Close
        </button>
        <button
          type="button"
          (click)="createSection()"
          data-bs-dismiss="modal"
          class="btn btn-primary"
        >
          Adicionar
        </button>
      </div>
    </div>
  </div>
</div>

<div id="AllContent" hidden>
  <app-view-documentation
    [sections]="loadDocumentacao.sections"
    [loadDocumentacao]="loadDocumentacao"
  ></app-view-documentation>
</div>
