<div class="container mt-4" style="height: 9999vh;">
  <div class="container" style="display: flex; flex-direction: row; flex-wrap: nowrap; align-items: baseline; justify-content: flex-start;">
    <h4>{{ titulo }}: </h4>
    <span class="mx-2 text-secondary">{{ descricaoTabela }}</span>


    <i class="bi bi-trash-fill mx-5" style="color: #FE786F;"></i>
  </div>

  <div class="container mt-5" style="display: flex;">
    
    <table class="table">
      <thead>
        <tr class="border-bottom border-dark-subtle">
          <th scope="col">Coluna</th>
          <th scope="col">Tipo</th>
          <th scope="col">Formato</th>
          <th scope="col">Tamanho</th>
          <th scope="col">Descrição</th>
          <th scope="col">Marcação</th>
          <th scope="col">Exemplo</th>
        </tr>

      </thead>
      <tbody>
        <tr *ngFor="let col of colunas; let i = index">
          <th scope="row">
            <span *ngIf="!editMode && !viewOnly" (dblclick)="enableEditMode(i)">
              {{ col.nome }}
            </span>
            <span *ngIf="viewOnly">
              {{ col.nome }}
            </span>
            <input
              class="inputEditTable"
              *ngIf="editMode"
              type="text"
              [value]="col.nome"
              (blur)="disableEditMode({ nome: $event })"
              (keyup.enter)="saveChanges({ nome: $event })"
            />
          </th>
          <td>
            <span *ngIf="!editMode && !viewOnly" (dblclick)="enableEditMode(i)">
              {{ col.tipo }}
            </span>
            <span *ngIf="viewOnly">
              {{ col.tipo }}
            </span>
            <input
              class="inputEditTable"
              *ngIf="editMode"
              type="text"
              [value]="col.tipo"
              (blur)="disableEditMode({ tipo: $event })"
              (keyup.enter)="saveChanges({ tipo: $event })"
            />
          </td>
          <td>
            <span *ngIf="!editMode && !viewOnly" (dblclick)="enableEditMode(i)">
              {{ col.formato }}
            </span>
            <span *ngIf="viewOnly">
              {{ col.formato }}
            </span>
            <input
              class="inputEditTable"
              *ngIf="editMode"
              type="text"
              [value]="col.formato"
              (blur)="disableEditMode({ formato: $event })"
              (keyup.enter)="saveChanges({ formato: $event })"
            />
          </td>
          <td>
            <span *ngIf="!editMode && !viewOnly" (dblclick)="enableEditMode(i)">
              {{ col.tamanho }}
            </span>
            <span *ngIf="viewOnly">
              {{ col.tamanho }}
            </span>
            <input
              class="inputEditTable"
              *ngIf="editMode"
              type="text"
              [value]="col.tamanho"
              (blur)="disableEditMode({ tamanho: $event })"
              (keyup.enter)="saveChanges({ tamanho: $event })"
            />
          </td>
          <td>
            <span *ngIf="!editMode && !viewOnly" (dblclick)="enableEditMode(i)">
              {{ col.descricao }}
            </span>
            <span *ngIf="viewOnly">
              {{ col.descricao }}
            </span>
            <input
              class="inputEditTable"
              *ngIf="editMode"
              type="text"
              [value]="col.descricao"
              (blur)="disableEditMode({ descricao: $event })"
              (keyup.enter)="saveChanges({ descricao: $event })"
            />
          </td>
          <td>
            <span *ngIf="!editMode && !viewOnly" (dblclick)="enableEditMode(i)">
              {{ col.marcacao }}
            </span>
            <span *ngIf="viewOnly">
              {{ col.marcacao }}
            </span>
            <input
              class="inputEditTable"
              *ngIf="editMode"
              type="text"
              [value]="col.marcacao"
              (blur)="disableEditMode({ marcacao: $event })"
              (keyup.enter)="saveChanges({ marcacao: $event })"
            />
          </td>
          <td>
            <span *ngIf="!editMode && !viewOnly" (dblclick)="enableEditMode(i)">
              {{ col.exemplo }}
            </span>
            <span *ngIf="viewOnly">
              {{ col.exemplo }}
            </span>
            <input
              class="inputEditTable"
              *ngIf="editMode"
              type="text"
              [value]="col.exemplo"
              (blur)="disableEditMode({ exemplo: $event })"
              (keyup.enter)="saveChanges({ exemplo: $event })"
            />
          </td>

          <button style="border: none" (click)="dellColuna(i)">
            <i class="bi bi-trash3-fill" style="color: #d31a1a"></i>
          </button>
        </tr>

        <tr *ngIf="!editMode && !viewOnly">
          <th scope="row">
            <input
              [(ngModel)]="coluna.nome"
              class="inputEditTable"
              type="text"
            />
          </th>
          <td>
            <input
              [(ngModel)]="coluna.tipo"
              class="inputEditTable"
              type="text"
            />
          </td>
          <td>
            <input
              [(ngModel)]="coluna.formato"
              class="inputEditTable"
              type="text"
            />
          </td>
          <td>
            <input
              [(ngModel)]="coluna.tamanho"
              class="inputEditTable"
              type="text"
            />
          </td>
          <td>
            <input
              [(ngModel)]="coluna.descricao"
              class="inputEditTable"
              type="text"
            />
          </td>
          <td>
            <input
              [(ngModel)]="coluna.marcacao"
              class="inputEditTable"
              type="text"
            />
          </td>
          <td>
            <input
              [(ngModel)]="coluna.exemplo"
              class="inputEditTable"
              type="text"
            />
          </td>

          <button (click)="addColuna()">
            <i class="bi bi-check-lg" style="color: #1ad38c"></i>
          </button>
        </tr>
      </tbody>
    </table>

  </div>
</div>

